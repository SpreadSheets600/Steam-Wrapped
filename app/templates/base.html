<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Steam Wrapped 2025</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Space+Grotesk:wght@300;500;700&family=Syne:wght@400;700;800&display=swap"
    rel="stylesheet" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          fontFamily: {
            sans: ["Space Grotesk", "sans-serif"],
            mono: ["JetBrains Mono", "monospace"],
            display: ["Syne", "sans-serif"],
          },
          colors: {
            neon: {
              blue: "#3B82F6",
              purple: "#8B5CF6",
              green: "#10B981",
            },
            void: "#05060A",
          },
          animation: {
            float: "float 6s ease-in-out infinite",
            "pulse-slow": "pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite",
          },
          keyframes: {
            float: {
              "0%, 100%": { transform: "translateY(0)" },
              "50%": { transform: "translateY(-20px)" },
            },
          },
        },
      },
    };
  </script>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      background-color: #030305;
      color: white;
      overflow-x: hidden;
    }

    .glass {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .neon-text {
      text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
    }

    .gradient-mesh {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: -1;
      background: radial-gradient(circle at 15% 50%, rgba(59, 130, 246, 0.08), transparent 25%), radial-gradient(circle at 85% 30%, rgba(139, 92, 246, 0.08), transparent 25%);
      pointer-events: none;
    }

    .noise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 9999;
      opacity: 0.03;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }
  </style>
</head>

<body class="text-white font-sans antialiased selection:bg-neon-blue selection:text-white overflow-x-hidden">
  <div class="noise"></div>
  <div class="gradient-mesh"></div>

  {% include 'components/navbar.html' %}

  <main class="min-h-screen {% block main_padding %}pt-28{% endblock %}">{% block content %}{% endblock %}</main>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById("mobile-menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");

    if (mobileMenuBtn && mobileMenu) {
      mobileMenuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    }

    // Global animations
    gsap.from("nav", {
      y: -100,
      opacity: 0,
      duration: 1,
      ease: "power4.out",
    });

    window.copyLinkHelpers = (() => {
      const fallbackCopy = (text) => {
        return new Promise((resolve, reject) => {
          const textarea = document.createElement("textarea");
          textarea.value = text;
          textarea.setAttribute("readonly", "");
          textarea.style.position = "absolute";
          textarea.style.left = "-9999px";
          document.body.appendChild(textarea);
          textarea.select();
          textarea.setSelectionRange(0, textarea.value.length);
          try {
            const ok = document.execCommand("copy");
            document.body.removeChild(textarea);
            return ok ? resolve(true) : reject(new Error("copy failed"));
          } catch (err) {
            document.body.removeChild(textarea);
            return reject(err);
          }
        });
      };

      const copyText = (text) => {
        if (navigator.clipboard && window.isSecureContext) {
          return navigator.clipboard.writeText(text).then(() => true).catch(() => fallbackCopy(text));
        }
        return fallbackCopy(text);
      };

      const showCopyFeedback = (button, success = true) => {
        if (!button) return;
        const originalLabel = button.dataset.copyOriginalLabel || button.textContent.trim();
        button.dataset.copyOriginalLabel = originalLabel;
        const feedbackId = button.getAttribute("data-copy-feedback");
        const feedbackEl = feedbackId ? document.getElementById(feedbackId) : null;

        if (feedbackEl) {
          feedbackEl.textContent = success ? "Link copied!" : "Unable to copy link";
          feedbackEl.classList.remove("hidden");
          feedbackEl.classList.toggle("text-red-400", !success);
        }

        button.textContent = success ? "Copied!" : "Copy Failed";
        button.disabled = true;

        setTimeout(() => {
          button.textContent = originalLabel;
          button.disabled = false;
          if (feedbackEl) {
            feedbackEl.classList.add("hidden");
          }
        }, 2000);
      };

      const copyFromButton = (button) => {
        if (!button) return;
        const target = button.getAttribute("data-copy-target");
        const input = target ? document.getElementById(target) : null;
        if (!input) return;

        copyText(input.value)
          .then(() => showCopyFeedback(button, true))
          .catch(() => showCopyFeedback(button, false));
      };

      const init = () => {
        document.querySelectorAll("[data-copy-target]").forEach((button) => {
          if (button.dataset.copyBound) return;
          button.dataset.copyBound = "true";
          button.addEventListener("click", (evt) => {
            evt.preventDefault();
            copyFromButton(button);
          });
        });
      };

      return { init, copyFromButton };
    })();

    window.copyLinkHelpers.init();
  </script>
  {% block scripts %}{% endblock %}
</body>

</html>
